(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{263:function(e,t,a){"use strict";a.d(t,"a",(function(){return Z}));var n=a(192),r=a(81),o=a(0),i=a.n(o),c=a(2),l=a(365),s=a(18),u=a.n(s),m=a(83),d=(a(286),a(287),(0===m.apps.length?m.initializeApp({apiKey:"AIzaSyAr-WAJVECuwSITdE8Y5Paefy38Ls9xT4U",authDomain:"signal-native-6ff0f.firebaseapp.com",projectId:"signal-native-6ff0f",storageBucket:"signal-native-6ff0f.appspot.com",messagingSenderId:"790074988790",appId:"1:790074988790:web:2b98e97a07969a6b94f4d7",measurementId:"G-Q6LJR7GYVZ"}):m.app()).firestore()),h=m.auth(),f=a(91),g=a(3),p=a(33),E=function(e){var t=e.navigation,a=Object(o.useState)(""),n=u()(a,2),c=n[0],l=n[1],s=Object(o.useState)(""),m=u()(s,2),d=m[0],E=m[1];Object(o.useEffect)((function(){return h.onAuthStateChanged((function(e){console.log(e),e&&t.replace("Home")}))}),[]);var b=function(){h.signInWithEmailAndPassword(c,d).catch((function(e){return alert(e)}))};return i.a.createElement(f.a,{style:y.container},i.a.createElement(r.a,{style:"light"}),i.a.createElement(p.c,{source:{uri:"https://blog.mozilla.org/internetcitizen/files/2018/08/signal-logo.png"},style:{width:200,height:200}}),i.a.createElement(g.a,{style:y.inputContainer},i.a.createElement(p.d,{placeholder:"Email",autoFocus:!0,type:"Email",value:c,onChangeText:function(e){return l(e)}}),i.a.createElement(p.d,{placeholder:"Password",secureTextEntry:!0,type:"password",value:d,onChangeText:function(e){return E(e)},onSubmitEditing:b})),i.a.createElement(p.b,{containerStyle:y.button,title:"Login",onPress:b}),i.a.createElement(p.b,{onPress:function(){return t.navigate("Register")},containerStyle:y.button,title:"Register",type:"outline"}),i.a.createElement(g.a,{style:{height:100}}))},y=c.a.create({container:{flex:1,alignItems:"center",justifyContent:"center",padding:"10"},inputContainer:{width:300},button:{width:200,marginTop:10}}),b=function(e){var t=e.navigation,a=Object(o.useState)(""),n=u()(a,2),c=n[0],l=n[1],s=Object(o.useState)(""),m=u()(s,2),d=m[0],E=m[1],y=Object(o.useState)(""),b=u()(y,2),S=b[0],C=b[1],w=Object(o.useState)(""),x=u()(w,2),O=x[0],k=x[1];Object(o.useLayoutEffect)((function(){t.setOptions({headerTruncatedBackTitle:"Back to Login"})}),[t]);var T=function(){h.createUserWithEmailAndPassword(d,S).then((function(e){e.user.updateProfile({displayName:c,photoURL:O||"https://cdn.pixabay.com/photo/2016/08/08/09/17/avatar-1577909_1280.png"})})).catch((function(e){return alert(e.message)}))};return i.a.createElement(f.a,{behaviour:"padding",style:v.container},i.a.createElement(r.a,{style:"light"}),i.a.createElement(p.f,{h3:!0,style:{marginBottom:50}},"Create a Signal Account"),i.a.createElement(g.a,{style:v.inputcontainer},i.a.createElement(p.d,{placeholder:"Full Name ",autoFocus:!0,type:"text",value:c,onChangeText:function(e){return l(e)}}),i.a.createElement(p.d,{placeholder:"Email ",autoFocus:!0,type:"email",value:d,onChangeText:function(e){return E(e)}}),i.a.createElement(p.d,{placeholder:"Password",autoFocus:!0,secureTextEntry:!0,type:"password",value:S,onChangeText:function(e){return C(e)}}),i.a.createElement(p.d,{placeholder:"Profilepic Url",autoFocus:!0,type:"text",value:O,onChangeText:function(e){return k(e)},onSubmitEditing:T})),i.a.createElement(p.b,{containerStyle:v.button,raised:!0,title:"Register",onPress:T}),i.a.createElement(g.a,{style:{height:100}}))},v=c.a.create({container:{flex:1,alignItems:"center",justifyContent:"center",padding:10,backgroundColor:"white"},button:{width:200,marginTop:10},inputcontainer:{width:300}}),S=a(130),C=a(23),w=a(262),x=function(e){var t,a,n,r=e.id,c=e.chatName,l=e.enterChat,s=(e.displayName,e.message,Object(o.useState)([])),m=u()(s,2),h=m[0],f=m[1];return Object(o.useEffect)((function(){return d.collection("chats").doc(r).collection("messages").orderBy("timestamp","asc").onSnapshot((function(e){return f(e.docs.map((function(e){return e.data()})))}))}),[]),i.a.createElement(p.e,{key:r,onPress:function(){return l(r,c)},key:r,bottomDivider:!0},i.a.createElement(p.a,{rounded:!0,source:{uri:(null==h||null==(t=h[0])?void 0:t.photoURL)||"https://cdn.pixabay.com/photo/2016/08/08/09/17/avatar-1577909_1280.png"}}),i.a.createElement(p.e.Content,null,i.a.createElement(p.e.Title,{style:{fontWeight:"800"}},c),i.a.createElement(p.e.Subtitle,{numberOfLines:1},null==h||null==(a=h[0])?void 0:a.displayName," : ",null==h||null==(n=h[0])?void 0:n.message)))},O=(c.a.create({}),a(228)),k=a(236),T=function(e){var t=e.navigation,a=Object(o.useState)([]),n=u()(a,2),r=n[0],c=n[1],l=function(){h.signOut().then((function(){t.replace("Login")}))};Object(o.useEffect)((function(){return d.collection("chats").onSnapshot((function(e){return c(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]),Object(o.useLayoutEffect)((function(){t.setOptions({title:"Signal",headerTitleAlign:"center",headerStyle:{backgroundColor:"#fff"},headerTitleStyle:{color:"black"},headerTintcolor:"black",headerLeft:function(){var e;return i.a.createElement(g.a,{style:{marginLeft:20}},i.a.createElement(C.a,{onPress:l,activeOpacity:.5},i.a.createElement(p.a,{rounded:!0,source:{uri:null==h||null==(e=h.currentUser)?void 0:e.photoURL}})))},headerRight:function(){return i.a.createElement(g.a,{style:{flexDirection:"row",justifyContent:"space-between",width:80,marginRight:20}},i.a.createElement(C.a,null,i.a.createElement(O.a,{name:"camera",size:24,color:"black"})),i.a.createElement(C.a,null,i.a.createElement(k.a,{onPress:function(){return t.navigate("AddChat")},name:"pencil",color:"black",size:24})))}})}),[t]);var s=function(e,a){t.navigate("Chat",{id:e,chatName:a})};return i.a.createElement(S.a,null,i.a.createElement(w.a,{style:L.container},r.map((function(e){var t=e.id,a=e.data.chatName;return i.a.createElement(x,{key:t,id:t,enterChat:s,chatName:a})}))))},L=c.a.create({container:{height:"100%"}}),j=a(21),R=a.n(j),N=a(241),P=function(e){var t=e.navigation,a=Object(o.useState)(""),n=u()(a,2),r=n[0],c=n[1];Object(o.useLayoutEffect)((function(){t.setOptions({title:"Add a New Chat"})}),[t]);var l=function(){return R.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.awrap(d.collection("chats").add({chatName:r}).then((function(){t.goBack()})).catch((function(e){return alert(e)})));case 2:case"end":return e.stop()}}),null,null,null,Promise)};return i.a.createElement(g.a,{style:U.container},i.a.createElement(p.d,{placeholder:"Enter a Chat Name",value:r,onSubmitEditing:l,onChangeText:function(e){return c(e)},leftIcon:i.a.createElement(g.a,null,i.a.createElement(N.a,{name:"wechat",size:24,color:"black"}))}),i.a.createElement(p.b,{disabled:r,onPress:l,title:"Add New Chat"}," New chat"))},U=c.a.create({container:{backgroundColor:"white",padding:30,height:"100%"}}),I=a(231),z=a(221),A=a(55),B=a(29),F=a(8),W=a(60),D=a(68),J=a(76),V=a(259),G=a(109),H=a.n(G);V.a.ignoreWarnings(["Setting a timer"]);var Y=H.a.clone(console);console.warn=function(e){e.indexOf("Setting a timer")<=-1&&Y.warn(e)};var _=function(e){var t=e.navigation,a=e.route,n=Object(o.useState)(""),c=u()(n,2),l=c[0],s=c[1],E=Object(o.useState)([]),y=u()(E,2),b=y[0],v=y[1];Object(o.useLayoutEffect)((function(){t.setOptions({title:"chat",headerTitleAlign:"left",headerTitle:function(){var e;return i.a.createElement(g.a,{style:{flexDirection:"row",alignItems:"center",paddingRight:50}},i.a.createElement(p.a,{rounded:!0,source:{uri:null==(e=b[0])?void 0:e.data.photoURL}}),i.a.createElement(B.a,{style:{color:"white",marginLeft:10,fontWeight:"700"}}," ",a.params.chatName," "))},headerLeft:function(){return i.a.createElement(C.a,{style:{marginLeft:10},onPress:t.goBack},i.a.createElement(N.a,{name:"arrowleft",size:24,color:"white"}))},headerRight:function(){return i.a.createElement(g.a,{style:{flexDirection:"row",justifyContent:"space-between",width:80,marginRight:20}},i.a.createElement(C.a,null,i.a.createElement(I.a,{name:"video-camera",size:22,color:"white"})),i.a.createElement(C.a,null,i.a.createElement(z.a,{name:"call",size:22,color:"white"})))}})}),[t,b]);var w=function(){D.a.dismiss(),d.collection("chats").doc(a.params.id).collection("messages").add({timestamp:m.firestore.FieldValue.serverTimestamp(),message:l,displayName:h.currentUser.displayName,email:h.currentUser.email,photoURL:h.currentUser.photoURL}),s("")};return Object(o.useLayoutEffect)((function(){return d.collection("chats").doc(a.params.id).collection("messages").orderBy("timestamp","asc").onSnapshot((function(e){return v(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[a]),i.a.createElement(S.a,{style:{flex:1,backgroundColor:"white"}},i.a.createElement(r.a,{style:"light"}),i.a.createElement(f.a,{behaviour:"ios"===F.a.OS?"padding":"height",style:K.container,keyboardVerticalOffset:90},i.a.createElement(J.a,{onPress:D.a.dismiss},i.a.createElement(i.a.Fragment,null,i.a.createElement(W.a,{contentContainerStyle:{paddingTop:15}},b.map((function(e){var t=e.id,a=e.data;return a.email==h.currentUser.email?i.a.createElement(g.a,{key:t,style:K.reciever},i.a.createElement(p.a,{position:"absolute",rounded:!0,containerStyle:{position:"absolute",bottom:-17,right:-6},size:25,source:{uri:a.photoURL}}),i.a.createElement(B.a,{style:K.senderText},a.message)):i.a.createElement(g.a,{key:t,style:K.sender},i.a.createElement(p.a,{position:"absolute",rounded:!0,containerStyle:{position:"absolute",bottom:-17,right:-6},size:25,source:{uri:a.photoURL}}),i.a.createElement(B.a,{style:K.senderText},a.message))}))),i.a.createElement(g.a,{style:K.footer},i.a.createElement(A.a,{value:l,onChangeText:function(e){return s(e)},onSubmitEditing:w,placeholder:"Signal Message",style:K.textInput}),i.a.createElement(C.a,{onPress:w,activeOpacity:.5},i.a.createElement(z.a,{name:"send",size:24,color:"black"})))))))},K=c.a.create({container:{flex:1},footer:{flexDirection:"row",alignItems:"center",width:"100%",padding:15},reciever:{padding:15,backgroundColor:"#ECECEC",alignSelf:"flex-end",borderRadius:20,marginRight:15,marginBottom:20,maxWidth:"80%",position:"relative"},sender:{padding:15,backgroundColor:"#50DBB4",alignSelf:"flex-start",borderRadius:20,marginLeft:15,marginBottom:20,maxWidth:"80%",position:"relative"},senderName:{left:5,paddingRight:10,fontSize:.5,color:"white"},textInput:{bottom:0,height:40,flex:1,marginRight:15,borderColor:"transparent",backgroundColor:"#ECECEC",borderWidth:1,padding:10,color:"gray",borderRadius:30}}),M=Object(l.a)(),Q={headerStyle:{backgroundColor:"#3944F0"},headerTitleStyle:{color:"white"},headerTintColor:"white"};function Z(){return i.a.createElement(n.a,null,i.a.createElement(M.Navigator,{initialRouteName:"Login",screenOptions:Q},i.a.createElement(M.Screen,{name:"Login",component:E}),i.a.createElement(M.Screen,{name:"Register",component:b}),i.a.createElement(M.Screen,{name:"Home",component:T}),i.a.createElement(M.Screen,{name:"AddChat",component:P}),i.a.createElement(M.Screen,{name:"Chat",component:_})))}c.a.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center"}})},273:function(e,t,a){e.exports=a(351)}},[[273,1,2]]]);
//# sourceMappingURL=app.79e4c511.chunk.js.map